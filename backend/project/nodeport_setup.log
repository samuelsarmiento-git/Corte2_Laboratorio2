[0;32m================================================================[0m
[0;32m  üåê HABILITANDO ACCESO DESDE RED LOCAL[0m
[0;32m  Sistema de Historia Cl√≠nica Distribuida[0m
[0;32m================================================================[0m


[1;33m[PASO 1/8][0m [0;36mVerificando requisitos previos[0m
[0;32m‚úì[0m Minikube instalado
[0;32m‚úì[0m kubectl instalado
[0;32m‚úì[0m Minikube corriendo

[1;33m[PASO 2/8][0m [0;36mVerificando namespace y pods[0m
[0;32m‚úì[0m Namespace verificado
[0;32m‚úì[0m Pods del middleware: 1

[1;33m[PASO 3/8][0m [0;36mDeteniendo port-forwards existentes[0m
[0;32m‚úì[0m Port-forwards detenidos

[1;33m[PASO 4/8][0m [0;36mAplicando configuraci√≥n NodePort[0m
[0;34m‚Ñπ[0m Archivo: infra/app-deployment-nodeport.yaml
deployment.apps "middleware-citus" deleted from citus namespace
service "middleware-citus-service" deleted from citus namespace
deployment.apps/middleware-citus created
service/middleware-citus-service created
[0;32m‚úì[0m Configuraci√≥n aplicada

[1;33m[PASO 5/8][0m [0;36mEsperando a que los pods est√©n listos[0m
‚è≥ Esperando pods (m√°ximo 120 segundos)...
pod/middleware-citus-7f6896b9fd-ht6jn condition met
[0;32m‚úì[0m Pods listos

[1;33m[PASO 6/8][0m [0;36mObteniendo informaci√≥n de acceso[0m
[0;34m‚Ñπ[0m IP de Minikube: 192.168.49.2
[0;34m‚Ñπ[0m NodePort asignado: 30800

[1;33m[PASO 7/8][0m [0;36mProbando conectividad[0m
‚è≥ Esperando 5 segundos para que el servicio est√© listo...
[0;34m‚Ñπ[0m Test 1: Health check...
[0;32m‚úì[0m Health check OK
[0;34m‚Ñπ[0m Test 2: Root endpoint...
[0;32m‚úì[0m Root endpoint OK

[1;33m[PASO 8/8][0m [0;36mInformaci√≥n de acceso[0m

[0;32m================================================================[0m
[0;32m  ‚úì NodePort CONFIGURADO EXITOSAMENTE[0m
[0;32m================================================================[0m

[0;36müì° ACCESO DESDE RED LOCAL:[0m
  [0;35mBase URL:[0m     [1;33mhttp://192.168.49.2:30800[0m
  [0;35mHealth:[0m       [1;33mhttp://192.168.49.2:30800/health[0m
  [0;35mSwagger UI:[0m   [1;33mhttp://192.168.49.2:30800/docs[0m
  [0;35mReDoc:[0m        [1;33mhttp://192.168.49.2:30800/redoc[0m

[0;36müß™ PROBAR LA API:[0m
  [1;33m# Health check[0m
  curl http://192.168.49.2:30800/health

  [1;33m# Obtener token[0m
  curl -X POST http://192.168.49.2:30800/token \
    -H 'Content-Type: application/json' \
    -d '{"username":"admin","password":"admin"}'

  [1;33m# Listar pacientes (requiere token)[0m
  TOKEN="tu_token_aqui"
  curl http://192.168.49.2:30800/pacientes \
    -H "Authorization: Bearer $TOKEN"

[0;36müì± ACCESO DESDE OTROS DISPOSITIVOS:[0m
  [0;35mSmartphone:[0m   Abre el navegador y ve a [1;33mhttp://192.168.49.2:30800/docs[0m
  [0;35mTablet:[0m       Misma URL desde cualquier dispositivo en la red
  [0;35mOtra PC:[0m      Acceso directo sin configuraci√≥n adicional

[0;36müí° IMPORTANTE:[0m
  [1;33m‚ö†[0m  Est√°s usando Docker driver. Si no puedes acceder:
      [0;35m1.[0m En otra terminal ejecuta: [1;33mminikube tunnel[0m
      [0;35m2.[0m Mant√©n esa terminal abierta mientras uses el sistema

[0;36müîß COMANDOS √öTILES:[0m
  [1;33mVer logs:[0m        kubectl logs -n citus -l app=middleware-citus -f
  [1;33mVer pods:[0m        kubectl get pods -n citus
  [1;33mVer servicios:[0m   kubectl get svc -n citus
  [1;33mReiniciar pod:[0m   kubectl delete pod -n citus -l app=middleware-citus

[0;36müìñ USUARIOS DE PRUEBA:[0m
  [0;32mAdmin:[0m       admin / admin
  [0;32mM√©dico:[0m      dr_rodriguez / password123
  [0;32mPaciente:[0m    paciente_juan / password123 (doc: 12345)

[0;32m¬°Sistema accesible desde toda la red local![0m

[0;34m‚Ñπ[0m Informaci√≥n guardada en: [1;33mnodeport_info.txt[0m
